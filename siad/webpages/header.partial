<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Simple Sidebar - Start Bootstrap Template</title>

    <!-- Bootstrap Core CSS -->
    <link href="lib/css/bootstrap.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="lib/css/sidebar.css" rel="stylesheet">

	<script type="text/javascript">
		function updateMiningStatus(updateString) {
			try {
				document.getElementById('miningStatus').innerHTML = updateString;
			} catch(e) {
			}
		}

		function updateWalletStatus(updateString) {
			try {
				document.getElementById('walletStatus').innerHTML = updateString;
			} catch(e) {
			}
		}

		function updateBlockInfo(updateString) {
			try {
				document.getElementById('blockStatus').innerHTML = updateString;
			} catch(e) {
			}
		}

		function updateResponseBox(updateString) {
			try {
				document.getElementById('apiResponse').innerHTML = updateString;
			} catch(e) {
			}
		}

		function updateHostStatus(updateString) {
			try {
				document.getElementById('hostStatus').innerHTML = updateString;
			} catch(e) {
			}
		}

		function updateHostFullStatus(updateString) {
			try {
				document.getElementById('hostFullStatus').innerHTML = updateString;
			} catch(e) {
			}
		}

		function updatePage() {
			var resp = httpGet("/json/status");
			var stats = JSON.parse(resp);
			updateMiningStatus('Mining Status: ' + stats.Mining);
			updateBlockInfo(
				'Current Height: ' + stats.StateInfo.Height +
				'<br>Current Target: ' + stats.StateInfo.Target +
				'<br>Current Depth: ' + stats.StateInfo.Depth
			);
			updateWalletStatus('Wallet Balance: ' + stats.WalletBalance + '<br>Wallet Address: ' + stats.WalletAddress);
			updateHostStatus(
				'Host Total Storage: ' + stats.HostSettings.TotalStorage +
				'<br>Host Unsold Storage: ' + stats.HostSpaceRemaining +
				'<br>Host Number of Contracts: ' + stats.HostContractCount
			);
			updateHostFullStatus(
				'IP Address: ' + stats.HostSettings.IPAddress.Host + ":" + stats.HostSettings.IPAddress.Port +
				'<br>Total Storage: ' + stats.HostSettings.TotalStorage +
				'<br>Unsold Storage: ' + stats.HostSpaceRemaining +
				'<br>Number of Contracts: ' + stats.HostContractCount +
				'<br>Min Filesize: ' + stats.HostSettings.MinFilesize +
				'<br>Max Filesize: ' + stats.HostSettings.MaxFilesize +
				'<br>Min Duration: ' + stats.HostSettings.MinDuration +
				'<br>Max Duration: ' + stats.HostSettings.MaxDuration +
				'<br>Min Challenge Window: ' + stats.HostSettings.MinChallengeWindow +
				'<br>Max Challenge Window: ' + stats.HostSettings.MaxChallengeWindow +
				'<br>Min Tolerance: ' + stats.HostSettings.MinTolerance +
				'<br>Price: ' + stats.HostSettings.Price +
				'<br>Burn: ' + stats.HostSettings.Burn +
				'<br>CoinAddress: ' + stats.HostSettings.CoinAddress
			);
		}

		function httpGet(url) {
			var xmlHttp = null;
			xmlHttp = new XMLHttpRequest();
			xmlHttp.open("GET", url, false);
			xmlHttp.send(null);
			return xmlHttp.responseText;
		}

		function updateGet(url) {
			var resp = httpGet(url);
			updatePage();
			return resp;
		}

		function responseBoxGet(url) {
			var resp = updateGet(url);
			updateResponseBox(resp);
			return resp;
		}

		function sendMoney() {
			var destination = document.getElementById('destinationAddress').value;
			var amount = document.getElementById('amountToSend').value;
			var fee = document.getElementById('minerFee').value;
			var request = "/sendcoins?amount="+amount+"&fee="+fee+"&dest="+destination;
			responseBoxGet(request);
		}

		function hostAnnounce() {
			var address = document.getElementById('hostIPAddress').value;
			var totalstorage = document.getElementById('hostTotalStorage').value;
			var minfile = document.getElementById('hostMinFilesize').value;
			var maxfile = document.getElementById('hostMaxFilesize').value;
			var minduration = document.getElementById('hostMinDuration').value;
			var maxduration = document.getElementById('hostMaxDuration').value;
			var minwin = document.getElementById('hostMinWindow').value;
			var maxwin = document.getElementById('hostMaxWindow').value;
			var mintolerance = document.getElementById('hostMinTolerance').value;
			var price = document.getElementById('hostPrice').value;
			var penalty = document.getElementById('hostBurn').value;
			var coinaddress = document.getElementById('hostCoinAddress').value;
			var freezevolume = document.getElementById('hostFreezeVolume').value;
			var freezeduration = document.getElementById('hostFreezeDuration').value;

			var request = "/host?ipaddress="+address+
				"&totalstorage="+totalstorage+
				"&minfile="+minfile+
				"&maxfile="+maxfile+
				"&minduration="+minduration+
				"&maxduration="+maxduration+
				"&minwin="+minwin+
				"&maxwin="+maxwin+
				"&mintolerance="+mintolerance+
				"&price="+price+
				"&penalty="+penalty+
				"&coinaddress="+coinaddress+
				"&freezevolume="+freezevolume+
				"&freezeduration="+freezeduration;

			responseBoxGet(request);
		}
	</script>
</head>

<body>

    <div id="wrapper">

        <!-- Sidebar -->
        <div id="sidebar-wrapper">
            <ul class="sidebar-nav">
                <li class="sidebar-brand">
                    <a href="index.html">
                        Sia Web Interface
                    </a>
                </li>
                <li>
                    <a href="index.html">Overview</a>
                </li>
                <li>
                    <a href="wallet.html">Money Management</a>
                </li>
                <li>
                    <a href="rent.html">File Management</a>
                </li>
                <li>
                    <a href="host.html">Host Management</a>
                </li>
                <li>
                    <a href="mine.html">Miner Management</a>
                </li>
            </ul>
        </div>
        <!-- /#sidebar-wrapper -->

